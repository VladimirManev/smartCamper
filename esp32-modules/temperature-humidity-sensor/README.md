# ESP32 Temperature & Humidity Sensor

ESP32 –º–æ–¥—É–ª —Å AM2301 (DHT22) —Å–µ–Ω–∑–æ—Ä –∑–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç.

## üîß –•–∞—Ä–¥—É–µ—Ä

### –°–≤—ä—Ä–∑–≤–∞–Ω–µ:

- **AM2301 Signal** ‚Üí GPIO 25
- **AM2301 VCC** ‚Üí 3.3V
- **AM2301 GND** ‚Üí GND

### –°–µ–Ω–∑–æ—Ä:

- **AM2301** (DHT22) - –∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω —Å–µ–Ω–∑–æ—Ä –∑–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç
- **–¢–æ—á–Ω–æ—Å—Ç**: ¬±0.5¬∞C –∑–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, ¬±2% –∑–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç
- **–û–±—Ö–≤–∞—Ç**: -40¬∞C –¥–æ +80¬∞C, 0-100% –≤–ª–∞–∂–Ω–æ—Å—Ç

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. WiFi –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–û—Ç–≤–æ—Ä–µ—Ç–µ `include/config.h` –∏ –ø—Ä–æ–º–µ–Ω–µ—Ç–µ:

```cpp
#define WIFI_SSID "YOUR_WIFI_SSID"
#define WIFI_PASSWORD "YOUR_WIFI_PASSWORD"
```

### 2. MQTT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü—Ä–æ–º–µ–Ω–µ—Ç–µ IP –∞–¥—Ä–µ—Å–∞ –Ω–∞ –≤–∞—à–∏—è backend —Å—ä—Ä–≤—ä—Ä:

```cpp
#define MQTT_SERVER "192.168.1.100"  // IP –Ω–∞ Raspberry Pi
```

## üöÄ –§–ª–∞—à–≤–∞–Ω–µ

### –° PlatformIO (VSCode):

1. –û—Ç–≤–æ—Ä–µ—Ç–µ VSCode —Å PlatformIO
2. –û—Ç–≤–æ—Ä–µ—Ç–µ –ø–∞–ø–∫–∞—Ç–∞ `temperature-humidity-sensor`
3. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ **Build** (‚úì)
4. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ **Upload** (‚Üí)

### –ö–æ–º–∞–Ω–¥–∏:

```bash
# –ö–æ–º–ø–∏–ª–∞—Ü–∏—è
pio run

# –§–ª–∞—à–≤–∞–Ω–µ
pio run --target upload

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ Serial
pio device monitor
```

## üì° MQTT Topics

–ú–æ–¥—É–ª—ä—Ç –ø—É–±–ª–∏–∫—É–≤–∞ –¥–∞–Ω–Ω–∏ –≤ —Å–ª–µ–¥–Ω–∏—Ç–µ topics:

### –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:

- **Topic**: `smartcamper/sensors/temperature/living/data`
- **Payload**:

```json
{
  "value": 22.5,
  "unit": "celsius",
  "device_id": "temp_living_01",
  "timestamp": 1234567890
}
```

### –í–ª–∞–∂–Ω–æ—Å—Ç:

- **Topic**: `smartcamper/sensors/humidity/living/data`
- **Payload**:

```json
{
  "value": 65.2,
  "unit": "percent",
  "device_id": "hum_living_01",
  "timestamp": 1234567890
}
```

## üîç Debug

–û—Ç–≤–æ—Ä–µ—Ç–µ Serial Monitor (115200 baud) –∑–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ debug —Å—ä–æ–±—â–µ–Ω–∏—è:

```
[1234] üèïÔ∏è SmartCamper ESP32 - Temperature & Humidity Sensor
[1235] Starting up...
[1236] DHT sensor initialized
[1237] Connecting to WiFi...
[2345] WiFi connected!
[2346] IP address: 192.168.1.101
[2347] MQTT client configured
[3456] MQTT connected!
[3457] Temperature: 22.5¬∞C, Humidity: 65.2%
[3458] Temperature data published
[3459] Humidity data published
```

## ‚ö° –ò–Ω—Ç–µ—Ä–≤–∞–ª–∏

- **–ß–µ—Ç–µ–Ω–µ –Ω–∞ —Å–µ–Ω–∑–æ—Ä–∞**: 5 —Å–µ–∫—É–Ω–¥–∏
- **–ü—É–±–ª–∏–∫—É–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏**: 10 —Å–µ–∫—É–Ω–¥–∏
- **WiFi retry**: 5 —Å–µ–∫—É–Ω–¥–∏

## üìã –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **DHT sensor library** - –∑–∞ AM2301 —Å–µ–Ω–∑–æ—Ä–∞
- **PubSubClient** - –∑–∞ MQTT –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è
- **ArduinoJson** - –∑–∞ JSON —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ
- **WiFi** - –∑–∞ –º—Ä–µ–∂–æ–≤–∞ –≤—Ä—ä–∑–∫–∞

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏

### –°–µ–Ω–∑–æ—Ä—ä—Ç –Ω–µ —á–µ—Ç–µ –¥–∞–Ω–Ω–∏:

- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ—Ç–æ
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –ø–∏–Ω—ä—Ç –µ –ø—Ä–∞–≤–∏–ª–µ–Ω (25)
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –∑–∞—Ö—Ä–∞–Ω–≤–∞–Ω–µ—Ç–æ (3.3V)

### WiFi –Ω–µ —Å–µ —Å–≤—ä—Ä–∑–≤–∞:

- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ SSID –∏ –ø–∞—Ä–æ–ª–∞—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ WiFi –µ –≤ –æ–±—Ö–≤–∞—Ç–∞

### MQTT –Ω–µ —Å–µ —Å–≤—ä—Ä–∑–≤–∞:

- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ IP –∞–¥—Ä–µ—Å–∞ –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ backend-—ä—Ç —Ä–∞–±–æ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –ø–æ—Ä—Ç 1883
