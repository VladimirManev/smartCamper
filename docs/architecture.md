# SmartCamper - ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

## ğŸ—ï¸ ĞĞ±Ñ‰Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    MQTT     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    MQTT     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ESP32 ĞœĞ¾Ğ´ÑƒĞ»Ğ¸  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   Backend       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   Frontend      â”‚
â”‚   (Ğ¡ĞµĞ½Ğ·Ğ¾Ñ€Ğ¸)     â”‚             â”‚   (ĞœĞ¾Ğ·ÑŠĞº)       â”‚             â”‚   (Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                â”‚                                â”‚
        â”‚                                â”‚                                â”‚
        â–¼                                â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ğ¡ĞµĞ½Ğ·Ğ¾Ñ€Ğ¸:      â”‚             â”‚   MQTT Broker   â”‚             â”‚   React App     â”‚
â”‚   - Ğ¢ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° â”‚             â”‚   (Mosquitto)   â”‚             â”‚   (Web)         â”‚
â”‚   - Ğ’Ğ»Ğ°Ğ¶Ğ½Ğ¾ÑÑ‚    â”‚             â”‚                 â”‚             â”‚                 â”‚
â”‚   - Ğ ĞµĞ·ĞµÑ€Ğ²Ğ¾Ğ°Ñ€   â”‚             â”‚   Express.js    â”‚             â”‚   Material-UI   â”‚
â”‚   - Ğ•Ğ»ĞµĞºÑ‚Ñ€Ğ¸ĞºĞ°   â”‚             â”‚   Ğ¡ÑŠÑ€Ğ²ÑŠÑ€        â”‚             â”‚   Charts        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚   MongoDB       â”‚
                               â”‚   (Ğ”Ğ°Ğ½Ğ½Ğ¸)       â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ MQTT Topics ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

### ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¸ topics:
```
smartcamper/
â”œâ”€â”€ sensors/                    # Ğ”Ğ°Ğ½Ğ½Ğ¸ Ğ¾Ñ‚ ÑĞµĞ½Ğ·Ğ¾Ñ€Ğ¸
â”‚   â”œâ”€â”€ temperature/+/data      # Ğ¢ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° (device_id/data)
â”‚   â”œâ”€â”€ humidity/+/data         # Ğ’Ğ»Ğ°Ğ¶Ğ½Ğ¾ÑÑ‚
â”‚   â”œâ”€â”€ water-tank/+/level      # ĞĞ¸Ğ²Ğ¾ Ğ½Ğ° Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ¾Ğ°Ñ€Ğ°
â”‚   â”œâ”€â”€ battery/+/voltage       # ĞĞ°Ğ¿Ñ€ĞµĞ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ±Ğ°Ñ‚ĞµÑ€Ğ¸ÑÑ‚Ğ°
â”‚   â””â”€â”€ power/+/consumption     # ĞšĞ¾Ğ½ÑÑƒĞ¼Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ‚Ğ¾Ğº
â”œâ”€â”€ actuators/                  # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°
â”‚   â”œâ”€â”€ lights/+/control        # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¾ÑĞ²ĞµÑ‚Ğ»ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ pumps/+/control         # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¿Ğ¾Ğ¼Ğ¿Ğ¸
â”‚   â””â”€â”€ heaters/+/control       # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ½Ğ°Ğ³Ñ€ĞµĞ²Ğ°Ñ‚ĞµĞ»Ğ¸
â”œâ”€â”€ system/                     # Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ğ° Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ status                  # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ°
â”‚   â”œâ”€â”€ alerts                  # ĞĞ»Ğ°Ñ€Ğ¼Ğ¸ Ğ¸ Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ
â”‚   â””â”€â”€ health                  # Ğ—Ğ´Ñ€Ğ°Ğ²Ğµ Ğ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ°
â””â”€â”€ config/                     # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
    â”œâ”€â”€ settings                # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    â””â”€â”€ thresholds              # ĞŸÑ€Ğ°Ğ³Ğ¾Ğ²Ğ¸ ÑÑ‚Ğ¾Ğ¹Ğ½Ğ¾ÑÑ‚Ğ¸
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¸ MQTT ÑÑŠĞ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ:
```json
// Ğ¢ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°
{
  "topic": "smartcamper/sensors/temperature/living/data",
  "payload": {
    "value": 22.5,
    "unit": "celsius",
    "timestamp": "2024-01-15T10:30:00Z",
    "device_id": "temp_living_01"
  }
}

// ĞĞ¸Ğ²Ğ¾ Ğ½Ğ° Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ¾Ğ°Ñ€Ğ°
{
  "topic": "smartcamper/sensors/water-tank/main/level",
  "payload": {
    "value": 75,
    "unit": "percent",
    "timestamp": "2024-01-15T10:30:00Z",
    "device_id": "water_tank_01"
  }
}

// Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¾ÑĞ²ĞµÑ‚Ğ»ĞµĞ½Ğ¸Ğµ
{
  "topic": "smartcamper/actuators/lights/living/control",
  "payload": {
    "action": "toggle",
    "brightness": 80,
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµĞ½ ÑÑ‚ĞµĞº

### Backend (Raspberry Pi 4)
- **Node.js** + **Express.js** - REST API
- **Mosquitto** - MQTT Broker
- **MongoDB** - Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ğ¸
- **Socket.io** - WebSocket Ğ·Ğ° real-time
- **PM2** - Process manager

### Frontend (React)
- **React** - UI framework
- **Material-UI** - ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸
- **Chart.js** - Ğ“Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸
- **MQTT.js** - MQTT ĞºĞ»Ğ¸ĞµĞ½Ñ‚
- **Socket.io-client** - WebSocket ĞºĞ»Ğ¸ĞµĞ½Ñ‚

### ESP32 ĞœĞ¾Ğ´ÑƒĞ»Ğ¸
- **Arduino C++** - ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¸Ñ€Ğ°Ğ½Ğµ
- **PubSubClient** - MQTT ĞºĞ»Ğ¸ĞµĞ½Ñ‚
- **WiFi** - ĞœÑ€ĞµĞ¶Ğ¾Ğ²Ğ° ĞºĞ¾Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
- **Ğ¡ĞµĞ½Ğ·Ğ¾Ñ€Ğ¸** - DHT22, Ultrasonic, Ğ¸ Ğ´Ñ€.

## ğŸ“Š Data Flow

1. **ESP32 Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸** Ñ‡ĞµÑ‚Ğ°Ñ‚ Ğ´Ğ°Ğ½Ğ½Ğ¸ Ğ¾Ñ‚ ÑĞµĞ½Ğ·Ğ¾Ñ€Ğ¸Ñ‚Ğµ
2. **ĞŸÑƒĞ±Ğ»Ğ¸ĞºÑƒĞ²Ğ°Ñ‚** Ğ´Ğ°Ğ½Ğ½Ğ¸Ñ‚Ğµ Ğ² MQTT topics
3. **Backend** Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ğ²Ğ° Ğ´Ğ°Ğ½Ğ½Ğ¸Ñ‚Ğµ Ğ¸ Ğ³Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑĞ²Ğ° Ğ² MongoDB
4. **Frontend** ÑĞµ Ğ°Ğ±Ğ¾Ğ½Ğ¸Ñ€Ğ° Ğ·Ğ° MQTT topics Ğ·Ğ° real-time updates
5. **ĞŸĞ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»ÑÑ‚** Ğ¼Ğ¾Ğ¶Ğµ Ğ´Ğ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞ²Ğ° ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ñ‚Ğ° Ñ‡Ñ€ĞµĞ· MQTT ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸

## ğŸ”’ Ğ¡Ğ¸Ğ³ÑƒÑ€Ğ½Ğ¾ÑÑ‚

- **MQTT Authentication** - Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»ÑĞºĞ¸ Ğ¸Ğ¼ĞµĞ½Ğ° Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸
- **TLS/SSL** - ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¸Ñ€Ğ°Ğ½Ğ° ĞºĞ¾Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
- **JWT Tokens** - Ğ·Ğ° API Ğ´Ğ¾ÑÑ‚ÑŠĞ¿
- **Input Validation** - Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ²ÑĞ¸Ñ‡ĞºĞ¸ Ğ²Ñ…Ğ¾Ğ´Ğ½Ğ¸ Ğ´Ğ°Ğ½Ğ½Ğ¸

## ğŸ“ˆ Scalability

- **Modular Design** - Ğ»ĞµÑĞ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑĞ½Ğµ Ğ½Ğ° Ğ½Ğ¾Ğ²Ğ¸ ÑĞµĞ½Ğ·Ğ¾Ñ€Ğ¸
- **MQTT Wildcards** - Ğ³ÑŠĞ²ĞºĞ°Ğ²Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° topics
- **Microservices** - Ğ²ÑŠĞ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ Ğ·Ğ° Ñ€Ğ°Ğ·Ğ´ĞµĞ»ÑĞ½Ğµ Ğ½Ğ° ÑƒÑĞ»ÑƒĞ³Ğ¸Ñ‚Ğµ
- **Docker** - ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ° Ğ»ĞµÑĞ½Ğ¾ deployment 